
---

## `docs/spec.md`

```md
# FocusGarden（MVP）仕様

## コンセプト
- 植物育成を“リアル寄り”に見せつつ、MVPではまず「育成セッション」と「突然変異抽選」ロジックを固める。
- 見た目デザインは後回し（プレースホルダ可）。

## 用語
- 個体(Plant): ユーザーが育てる1つの植物。
- 育成モード(Focus Session): UIロックされ、一定時間“操作しない”ことを前提としたセッション。
- 成長ポイント(GP): 成長進行度。10分で1GP増える。
- 完走: セッションのタイマーが0まで到達すること。
- 中断: セッション途中で終了（アプリ離脱・戻る・中断ボタン等）。

## 成長仕様
- 成長は「育成モード中のみ」進む。
- 10分 = 1 GP。
- 完全成長（成熟）まで 20時間相当 = 120 GP。
- 見た目演出はMVPでは不要（数値だけ進めてOK）。

## 育成モード（セッション）
- セッション選択肢: 10 / 25 / 45 / 60 分。
- セッション中は UIロック（育成操作は不可）。状態表示のみ閲覧可。
- 中断した場合:
  - セッションは失敗扱い（突然変異抽選なし）
  - 成長(GP)は「セッション中に経過した分だけ」確定で増える（巻き戻しなし）

## 突然変異
- 抽選は「セッション完走時」だけ実施する。中断は抽選なし。
- 抽選回数:
  - 10分: 1回
  - 25分: 2回
  - 45分: 3回
  - 60分: 4回
- 1回あたり当選確率: p = 0.5% (0.005)
- 抽選は「当たりが出たら終了」（最大1当選/セッション）
- 当たった場合、5種の突然変異から等確率(20%)で1つ付与
- すでにその変異を保持していたら「何も起きない」（再抽選しない）
- 変異は個体に永続付与

### 変異5種（ID固定）
- variegated（斑入り）
- tint_shift（色味変化）
- leaf_shape（葉形変化）
- dwarf（矮性）
- growth_form（枝ぶり/成長癖）

## 保存（MVP）
- 個体一覧、個体詳細、GP、変異配列、セッション履歴（最低限）をローカル保存。
- MVPは AsyncStorage でOK（後でSQLite移行可能なI/Fにしておく）

## 画面（MVP）
- Home: 個体一覧、作成、選択
- Focus: セッション選択→開始→ロック表示（残り時間・GP・変異一覧）
- Detail: 個体の状態（GP、変異、履歴）

## テスト方針
- 重要ロジックは純関数化して Jest で単体テスト。
- 必須テスト:
  - 抽選回数テーブルが正しい
  - 当たりで打ち切りされる
  - 既存変異はno-op
  - GPが10分=1で増える
  - 中断で抽選されない
